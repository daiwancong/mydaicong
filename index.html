<!DOCTYPE html>
<html>
<head>
	<title></title>
	<style type="text/css">
		div {
			position: absolute;
			top: 40px;
			left: 20px;
			width: 100px;
			height: 100px;
			background-color: pink;
		}
	</style>
</head>
<body>
		<button>移动到400在返回</button>
		<div></div>

		<script type="text/javascript">
			var btn =document.getElementsByTagName("button")[0];
			var div = document.getElementsByTagName("div")[0];

			btn.onclick=function(){
				var json1 = {"top":200,"left":200,"width":400,"height":400};
				var json2 = {"top":40,"left":20,"width":100,"height":100}
				animate(div,json1,function(){
					animate(div,json2);
				})
			}

			function animate(ele,json,fn){
				clearInterval(ele.timer);
				ele.timer=setInterval(function(){
					var bool = true;
					for(var k in json){
						var leader = parseInt(getStyle(ele,k)) || 0;
						var step = (json[k]-leader)/10;
						step = step>0?Math.ceil(step):Math.floor(step);
						leader = leader+step;
						ele.style[k]= leader + "px";
							if(json[k]!==leader){
								bool=false;
							}
					}
						if(bool){
							clearInterval(ele.timer);
							if(fn){
								fn();
							}
						}
				},25)
			}

			function getStyle(ele,attr){
				if(window.getComputedStyle){
					return window.getComputedStyle(ele,null)[attr];
				}
				return ele.currentStyle[attr];
			}
		</script>
</body>
</html>